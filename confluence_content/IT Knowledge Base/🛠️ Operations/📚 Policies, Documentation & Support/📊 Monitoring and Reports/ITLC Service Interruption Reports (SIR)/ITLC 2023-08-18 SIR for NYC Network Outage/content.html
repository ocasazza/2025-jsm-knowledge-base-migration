<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <span style="letter-spacing: 0.0px;">
     SIR for NYC
    </span>
    <span style="color: rgb(32,33,36);letter-spacing: 0.0px;">
     office network outage on
    </span>
    <span style="letter-spacing: 0.0px;">
    </span>
    <time datetime="2023-08-18">
    </time>
    <span style="letter-spacing: 0.0px;">
     .
    </span>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <br/>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="848b52f0-6139-41bc-8d64-661bb5c3fa31" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITINFRA-1912
            </ac:parameter>
           </ac:structured-macro>
           <ac:structured-macro ac:macro-id="7f688e3a-b5a8-4570-b6ab-53ceab64f69a" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITINFRA-1872
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         NYC office not available over AppGate during planned ISP outage.
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2023-08-18">
           </time>
           <span style="color: rgb(23,43,77);">
           </span>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2023-08-18">
           </time>
           <span style="color: rgb(23,43,77);">
           </span>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
          </ri:user>
         </ac:link>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <ac:placeholder>
          Use // for date macro for the date the report was reviewed with the team or relevant stakeholders
         </ac:placeholder>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:placeholder>
          List of people who had a part in reviewing or commenting on the report
         </ac:placeholder>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <ul>
    <li>
     NYC primary link(Lumen) had scheduled maintenance on August 19th 2023 from 12AM - 3AM EST.
    </li>
    <li>
     Nathaniel Williams Prepared to Failover to GTT NYC's secondary ISP to keep NYC connectivity up at 10:30 PM on Friday August 18th.
    </li>
    <li>
     After failing over NYC encountered issues as NYC was not accessible over AppGate. (This was because Nathaniel Williams forgot to update
     <span style="color: rgb(0,0,0);">
      Appgate SDP GW 1 and 2 for NYC Site.)
     </span>
    </li>
    <li>
     Below are the tunnels that was down and services that were unreachable when NYC over Appgate was restored.
    </li>
   </ul>
   <p>
    Jon Shelly reported "Slow logging into PDX."
   </p>
   <p>
    Herc Reported: "When I try to log into pdx-gate I'm getting: Could not chdir to home directory /home/herc: No such file or directory" (This worked after we failed back over to Lumen and all the Lumen Tunnels came up.)
   </p>
   <p>
    Daniel Levine reported "I am also unable to ping pdx-git from NYC. Related to the ISP maintenance?" (I was able to confirm NYC outage was related.)
   </p>
   <p>
    <ac:image ac:height="250">
     <ri:attachment ri:filename="image-2023-9-13_11-38-39.png">
     </ri:attachment>
    </ac:image>
   </p>
   <p>
    <ac:image ac:height="250" ac:thumbnail="true">
     <ri:attachment ri:filename="image-2023-9-13_10-15-58.png">
     </ri:attachment>
    </ac:image>
   </p>
   <p>
    <ac:image ac:thumbnail="true" ac:width="259">
     <ri:attachment ri:filename="image-2023-9-13_10-16-51.png">
     </ri:attachment>
    </ac:image>
   </p>
   <p>
    <ac:image ac:height="250" ac:thumbnail="true">
     <ri:attachment ri:filename="image-2023-9-13_10-17-13.png">
     </ri:attachment>
    </ac:image>
   </p>
   <p>
    <ac:image ac:height="250" ac:thumbnail="true">
     <ri:attachment ri:filename="image-2023-9-13_10-18-45.png">
     </ri:attachment>
    </ac:image>
   </p>
   <p>
    <span style="font-size: 20.0px;letter-spacing: -0.008em;">
     Background
    </span>
   </p>
   <hr/>
   <p>
    NYC primary ISP carried
    <span style="color: rgb(23,43,77);">
     out internal maintenance within its network on August 19th from 12AM - 3AM EST. Maintenance was considered ESSENTIAL. Lumen performed a software upgrade on the Lumen network and was required in order to improve network reliability and continue providing optimal service for their clients.
    </span>
   </p>
   <p>
    Nathaniel Williams took ticket to failover to the secondary circuit (GTT).
   </p>
   <p>
    Once the site was on the secondary circuit Wifi got restored for the NYC site.
   </p>
   <p>
    BUT
   </p>
   <p>
    <span style="letter-spacing: 0.0px;">
     NYC was not accessible over Appgate due to a missed step. Changes are made on the external DNS part to the secondary Egress ip  in NSone to restore the Appgate connectivity to NYC.
    </span>
   </p>
   <p>
    <br/>
   </p>
   <p>
    <span style="font-size: 20.0px;letter-spacing: -0.008em;">
     Incident Description
    </span>
   </p>
   <hr/>
   <p>
    <span style="color: rgb(23,43,77);">
     PrimaryISP (Lumen)  was down due to planned maintenance. Failover to GTT encountered issues due to not updating our external DNS record for NYC AppGate.
    </span>
   </p>
   <p>
    <span style="color: rgb(23,43,77);">
     Most secondary tunnels were down when Appgate was restored which raises concerns as multiple sites depend on NYC to be reachable over the internet and via Libre.
    </span>
   </p>
   <h3>
    Chronology
   </h3>
   <ol>
    <li>
     Nathaniel Williams Initiated NYC failover at 10:54 PM EST on Friday August 18th.
    </li>
    <li>
     Immediately after failover  NYC wasn't accessible over Appgate. (This was Nathaniel Williams mistake, Nathaniel forgot to update the external record in NS1 for Appgate.) Note: NYC internal Wifi and network was still up. 10:54 PM August 18th.
    </li>
    <li>
     Pinged
     <ac:link>
      <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
      </ri:user>
     </ac:link>
     to help me find the appropriate record in NS1. (This was a challenge identifying which record was the correct one in NS1.) In my opinion the title of the record could be more clear.
    </li>
    <li>
     <ac:link>
      <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
      </ri:user>
     </ac:link>
     located the appropriate record and updated the External DNS record for
     <span style="color: rgb(23,43,77);">
      <span style="color: rgb(23,43,77);">
       <span style="color: rgb(23,43,77);">
        Appgate SDP GW 1 for NYC Site and Appgate SDP GW 2. Which is titled (neutrino-nyc-1.sdgr.io and neutrino-nyc-2.sdgr.io) in NS1.
       </span>
      </span>
     </span>
    </li>
    <li>
     NYC over Appgate was restored at 11:31 PM August 18th.
    </li>
    <li>
     <span style="color: rgb(23,43,77);">
      <span style="color: rgb(23,43,77);">
       <span style="color: rgb(23,43,77);">
        Multiple services was still unreachable by Libre until our Primary link was restored.
       </span>
      </span>
     </span>
    </li>
    <li>
     <span style="color: rgb(23,43,77);">
      <span style="color: rgb(23,43,77);">
       <span style="color: rgb(23,43,77);">
        Nathaniel and I think Alex continued to snooze all alerts until the maintenance was complete.
       </span>
      </span>
     </span>
    </li>
    <li>
     <span style="color: rgb(23,43,77);">
      <span style="color: rgb(23,43,77);">
       <span style="color: rgb(23,43,77);">
        Lumen maintenance was complete at 3:06 AM EST and I was able to ping the gateway.
       </span>
      </span>
     </span>
    </li>
    <li>
     <span style="color: rgb(23,43,77);">
      <span style="color: rgb(23,43,77);">
       <span style="color: rgb(23,43,77);">
        Nathaniel Williams initiated failover back to Lumen at 3:07
       </span>
      </span>
     </span>
    </li>
    <li>
     <span style="color: rgb(23,43,77);">
      <span style="color: rgb(23,43,77);">
       <span style="color: rgb(23,43,77);">
        Lumen scheduled maintenance for NYC's ISP was complete and services have returned to normal. Communication was sent out at 3:22 AM on August 19th.
       </span>
      </span>
     </span>
    </li>
   </ol>
   <h3>
    Corrective Action
   </h3>
   <ul>
    <li>
     We need to implement and test automatic failover.
    </li>
    <li>
     We need to confirm we have redundant tunnels that are active for our secondary ISP link.
    </li>
    <li>
     <span>
      Plenty of sites/services lost connectivity to the NYC. We need to revisit those hub site and build the redundant tunnels to NYC and confirm we have routes in place.
     </span>
    </li>
    <li>
     <span>
      Review or document AppGate connectivity of the NYC site.
     </span>
    </li>
   </ul>
   <p>
    <br/>
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    Jon Shelly reported "Slow logging into PDX."
   </p>
   <p>
    Herc Reported: "When I try to log into pdx-gate I'm getting: Could not chdir to home directory /home/herc: No such file or directory" (This worked after we failed back over to Lumen and all the Lumen Tunnels came up.)
   </p>
   <p>
    Daniel Levine reported "I am also unable to ping pdx-git from NYC. Related to the ISP maintenance?" (I was able to confirm NYC outage was related.)
   </p>
   <p>
    Most secondary Tunnels were not active.
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <ac:placeholder>
     Edit the macro below to replace the issue ID in the JQL query
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="1dcb527e-6cb6-45a4-a4a1-55cf9b51022f" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter,customfield_11008
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter,Sprint
     </ac:parameter>
     <ac:parameter ac:name="maximumIssues">
      20
     </ac:parameter>
     <ac:parameter ac:name="jqlQuery">
      issue in linkedIssues(ITDW-123, "introduced")
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Issue was detected immediately by Nathaniel Williams. The second i failed over i noticed the issue.
      </em>
     </span>
    </span>
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Nathanel Williams and Pagerduty.
      </em>
     </span>
    </span>
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       I could have been more prepared and communication was great. I
      </em>
     </span>
    </span>
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span>
      <em>
       immediately.
      </em>
     </span>
    </span>
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Via IT Support Room.
      </em>
     </span>
    </span>
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    <span style="color: rgb(23,43,77);">
     This is well communicated, I could have followed up with updates.
    </span>
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       This was done the weekend before RandR. Minimal users noticed this was an issue. Only 3 users. Herc, Daniel, John.
      </em>
     </span>
    </span>
   </p>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Team work and communication from
       <ac:link>
        <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
        </ri:user>
       </ac:link>
       ,
       <ac:link>
        <ri:user ri:userkey="557058:037cebc0-7a1a-4a12-af72-7583a24ff5d6">
        </ri:user>
       </ac:link>
       and myself.
      </em>
     </span>
    </span>
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       This was a planned ISP outage not much we can do i regards to Lumen. however we should make sure our secondary ISP link can talk to everything Lumen can talk to and vice versa.
      </em>
     </span>
    </span>
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    More planning before a planned outage.
   </p>
   <p>
    Document check list.
   </p>
   <p>
    Making less sites and services dependent on NYC.
   </p>
   <p>
    Revisit our spoke and hub site configurations and ensure we have redundancy.
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <ac:structured-macro ac:macro-id="baf67459-0eee-4c38-be8a-6359cc97c25b" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2007
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       Type your task here, using "@" to assign to a user and "//" to select a due date
      </span>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
