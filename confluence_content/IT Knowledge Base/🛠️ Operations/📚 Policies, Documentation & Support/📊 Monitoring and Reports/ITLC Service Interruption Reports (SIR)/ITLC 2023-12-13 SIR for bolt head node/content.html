<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <ac:placeholder>
     Add labels to this report to make it easy to find outages that relate to the service or the sites that were affected. That will help us find and report on relevant related issues.
    </ac:placeholder>
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for bolt head node on
      <ac:structured-macro ac:macro-id="45b1e5f3-a4b8-42d6-b61b-9e8397bae14b" ac:name="jira" ac:schema-version="1">
       <ac:parameter ac:name="server">
        System JIRA
       </ac:parameter>
       <ac:parameter ac:name="columnIds">
        issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
       </ac:parameter>
       <ac:parameter ac:name="columns">
        key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
       </ac:parameter>
       <ac:parameter ac:name="serverId">
        ac6def98-2140-30c3-8103-4b52b8b31135
       </ac:parameter>
       <ac:parameter ac:name="key">
        ITHPC-618
       </ac:parameter>
      </ac:structured-macro>
      <time datetime="2023-12-08">
      </time>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           Bolt cluster
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="95ee97bc-d5cc-43bb-83e0-886a5e36e368" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITHPC-618
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         Bolt head node
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2023-12-08">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2023-12-13">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="557058:8aff9fa7-fab5-4a58-8371-4bbe29336cd2">
          </ri:user>
         </ac:link>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <br/>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    Bolt head was rebooted by accident while submitting reboot jobs for bolt-3 nodes.  The incident was caused by using the reboot job script instead of the reboot wrapper script.  Bolt head node came back online within 3 minutes.  No report from users about any job disruption
   </p>
   <p>
    <br/>
   </p>
   <p>
    Changes made:
   </p>
   <ol>
    <li>
     Updated job script to limit to compute node only
    </li>
   </ol>
   <p>
    Relevant code prior to the update:
   </p>
   <ac:structured-macro ac:macro-id="55123a5c-a3e4-4930-aa5b-9a8206f6ca26" ac:name="code" ac:schema-version="1">
    <ac:plain-text-body>
     <![CDATA[# PUT YOUR COMMAND TO RUN HERE
   echo "Rebooting..."
   /usr/bin/logger -p crit "Rebooting from admin_job"
   /sbin/reboot]]>
    </ac:plain-text-body>
   </ac:structured-macro>
   <p>
    <br/>
   </p>
   <p>
    Relevant code after the update
    <ac:structured-macro ac:macro-id="357beccf-f46a-49da-adbd-043f4a8cf4ff" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITHPC-619
     </ac:parameter>
    </ac:structured-macro>
    :
   </p>
   <ac:structured-macro ac:macro-id="1ae85515-14cc-4e5b-a590-9edb3d3f0e0e" ac:name="code" ac:schema-version="1">
    <ac:plain-text-body>
     <![CDATA[# PUT YOUR COMMAND TO RUN HERE
if [[ $(hostname -s) == bolt-* ]]; then
   echo "Rebooting..."
   /usr/bin/logger -p crit "Rebooting from admin_job"
   /sbin/reboot
fi]]>
    </ac:plain-text-body>
   </ac:structured-macro>
   <p>
    <br/>
   </p>
   <p>
    2. Renamed wrapper script name to be "wrapper_&lt;job script name&gt;" instead of "&lt;job script name&gt;_wrapper"
   </p>
   <p>
    <br/>
   </p>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <p>
    Sysmgr was working on upgrading kernel packages across bolt cluster.   All compute nodes are going to be upgraded. To upgrade a node, a reboot or reinstall job is submitted to that node to reboot or re-install the node.  For job submission, we should use corresponding wrapper script, instead of the reboot/re-install job script.  The reboot/reinstall job scripts do not check what kind of node they are running on and carry out the reboot command.
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    Bolt head node was rebooted due to incorrect job submission command.
   </p>
   <h3>
    Chronology
   </h3>
   <ul>
    <li>
     <span style="color: rgb(51,51,51);">
      <span style="background-color: rgb(245,245,245);">
       Fri Dec  8 17:24, bolt head node was rebooted by accident
      </span>
     </span>
    </li>
    <li>
     <span style="letter-spacing: 0.0px;">
      Fri Dec  8 17:27,  bolt head node came back online
     </span>
    </li>
    <li>
     <span style="letter-spacing: 0.0px;">
      Fri Dec  8 17:27-17:30, sysmgr checked bolt head node and confirmed SGE, DNS, NFS, LDAP, 411 etc services were running fine
     </span>
    </li>
   </ul>
   <p>
    <br/>
   </p>
   <h3>
    Corrective Action
   </h3>
   <p>
    Bolt node came back online.   Sysmgr checked and confirmed all services were running normally after reboot.
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    The reboot/reinstall job script would run on any bolt nodes while these scripts are intended for running a compute node.  A node check should prevent such an accident from happening.
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <ac:placeholder>
     Edit the macro below to replace the issue ID in the JQL query
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="1dcb527e-6cb6-45a4-a4a1-55cf9b51022f" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter,customfield_11008
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter,Sprint
     </ac:parameter>
     <ac:parameter ac:name="maximumIssues">
      20
     </ac:parameter>
     <ac:parameter ac:name="jqlQuery">
      issue in linkedIssues(ITDW-123, "introduced")
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    Sysmgr immediately noticed the issue.
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    Sysmgr detected the issue when the login console went away.
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    By sysmgr
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    Immediately
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    The outage was very short that no user reported any disruption,  An notification email was sent to cluster group.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    N/A
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    Bolt head node rebooted and came back online.  No manual intervention was needed by sysmgr.
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    Sysmgr needs to closely monitor bolt head node booting process and take correction action if bolt head node does not boot up properly
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    Improve the job script so that they will skip rebooting if running on bolt head and login nodes.
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     After analyzing and talking about this incident what actions did the reviewers and management decide should be done to address shortfalls in detection, mitigation or avoidance. Use tasks, assignments and due dates or link to created jira tickets.
    </ac:placeholder>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      Improve reboot/reinstall job script
      <ac:structured-macro ac:macro-id="374fe529-10a3-4315-9a8e-07dc6e6eeb23" ac:name="jira" ac:schema-version="1">
       <ac:parameter ac:name="server">
        System JIRA
       </ac:parameter>
       <ac:parameter ac:name="columnIds">
        issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
       </ac:parameter>
       <ac:parameter ac:name="columns">
        key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
       </ac:parameter>
       <ac:parameter ac:name="serverId">
        ac6def98-2140-30c3-8103-4b52b8b31135
       </ac:parameter>
       <ac:parameter ac:name="key">
        ITHPC-619
       </ac:parameter>
      </ac:structured-macro>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
