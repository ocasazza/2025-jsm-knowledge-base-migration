<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <ac:placeholder>
     Add labels to this report to make it easy to find outages that relate to the service or the sites that were affected. That will help us find and report on relevant related issues.
    </ac:placeholder>
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for Linux /home/&lt;username&gt; directories not mounting after Qumulo update onÂ 03/05/2024
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           Shared Linux
           <code>
            /home/&lt;username&gt;
           </code>
           autofs mountpoints coming from regional Qumulo
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <ac:structured-macro ac:macro-id="5a49998d-08b2-41dd-964a-163f07f66b08" ac:name="jira" ac:schema-version="1">
          <ac:parameter ac:name="server">
           System Jira
          </ac:parameter>
          <ac:parameter ac:name="serverId">
           ac6def98-2140-30c3-8103-4b52b8b31135
          </ac:parameter>
          <ac:parameter ac:name="key">
           ITINFRA-2744
          </ac:parameter>
         </ac:structured-macro>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         NYC and PDX Shared Linux
         <code>
          /home/&lt;username&gt;
         </code>
         autofs mountpoints coming from Qumulo NAS
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <time datetime="2024-03-05">
         </time>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <time datetime="2024-03-05">
         </time>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="712020:20683bcb-b5d6-4474-a40c-2a3ae5aaee4f">
          </ri:user>
         </ac:link>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <time datetime="2024-03-13">
         </time>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="712020:668ed8e3-9979-4f45-ba67-1748ea426e8c">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="557058:037cebc0-7a1a-4a12-af72-7583a24ff5d6">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:460d116b-6dd0-4201-9370-8098156f6d6f">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="557058:c19c6239-8657-4845-b158-eec62442daf4">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:71b2d823-3ea6-4303-ba75-6ea7f7537779">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
          </ri:user>
         </ac:link>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    All of our Qumulo clusters were updated over the weekend (03/02 - 03/04) to Qumulo Core Version 6.3.0.1.
   </p>
   <p>
    On the Tuesday (03/05/2024) after the update Linux users in NYC and PDX were reporting that they weren't able to mount their shared /home/&lt;username&gt; directories.
   </p>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     If this incident requires any background knowledge to understand or history that's relevant include it here.
    </ac:placeholder>
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    The source of the issue was that the old user mappings for the /home directory exports needed to be changed from "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        root_squash, anonlocal=guest
       </code>
      </span>
     </span>
    </span>
    " to "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        no_root_squash
       </code>
      </span>
     </span>
    </span>
    ".
   </p>
   <h3>
    Chronology
   </h3>
   <p>
    <time datetime="2024-03-02">
    </time>
    @ 9PM EST: Started updating the Qumulo clusters to version 6.3.0.1
   </p>
   <p>
    <time datetime="2024-03-02">
    </time>
    @ 10PM EST: Completed updating the nyc-stor-q01, pdx-stor-q01, hyd-stor-q01, and ewr-stor-q02, Qumulo clusters to version 6.3.0.1 (ewr-stor-q01 has RAM Issues but was updated by Monday (03/04) afternoon)
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 9:20AM EST: A ticket was created due to users and admins having the same issue; some were having issues mounting their
    <code>
     /home/&lt;username&gt;
    </code>
    directories on only some Linux systems.
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 9:43AM EST: I started checking into the issue; mostly assuming it was local to each system and thinking restarting the autofs service would be all that was needed.
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 12:22AM EST: More users are reporting the issue and I also started seeing it for my username on a spot checked system.
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 1:10PM EST: After reaching out to Qumulo support via their slack channel, we were able to determine the issue was caused by the software update.
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 1:20PM EST: The issue was determined to be the user mapping of the
    <code>
     /home
    </code>
    export on the Qumulo; the "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        root_squash, anonlocal=guest
       </code>
      </span>
     </span>
    </span>
    " values were the issue for the new software version and setting the export to "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        no_root_squash
       </code>
      </span>
     </span>
    </span>
    " was the solution.
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 1:33PM EST: After setting the "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        no_root_squash
       </code>
      </span>
     </span>
    </span>
    " user mapping option for the
    <code>
     /home
    </code>
    export coming from nyc-stor-q01, I was able to confirm that that was the solution.
   </p>
   <p>
    <time datetime="2024-03-05">
    </time>
    @ 1:44PM EST: All
    <code>
     /home
    </code>
    directory export from nyc-stor-q01, pdx-stor-q01, and ewr-stor-q01 have their user mapping set to "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        no_root_squash
       </code>
      </span>
     </span>
    </span>
    "
   </p>
   <h3>
    Corrective Action
   </h3>
   <p>
    The issue was determined to be the user mapping of the
    <code>
     /home
    </code>
    export on the Qumulo.
   </p>
   <p>
    Specifically, the "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        root_squash, anonlocal=guest
       </code>
      </span>
     </span>
    </span>
    " values were the issue after the Qumulo Core v6.3.0.1 software update.
   </p>
   <p>
    Setting the
    <code>
     /home
    </code>
    export to "
    <span>
     <span>
      <span class="prismjs css-49loy0">
       <code class="language-">
        no_root_squash
       </code>
      </span>
     </span>
    </span>
    " was the solution.
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    N/A
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <ac:placeholder>
     Edit the macro below to replace the issue ID in the JQL query
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="5cf819bd-0b33-4c92-acd9-6c6c6a97e592" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System Jira
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2744
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    Because no one was using their Linux desktops over the weekend, we didn't notice that there was going to be any issue.
   </p>
   <p>
    The issue was first report on a Tuesday, but so far, I'm not seeing any mentions of it before Tuesday (03/05).
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    Admins and users were both noticing the issue and a IT-INFRA ticket was created.
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    Hard to say because not all users were having the issue; my username wasn't having the issue on system that other were having the issue.
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    Within an hour.
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    Within an hour.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    N/A
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    Identifying the issue and creating a ticket to track any work helped contain the issue.
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    Again, hard to say because not all users were having the issue; my username wasn't having the issue on system that other were having the issue.
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    Again, hard to say because not all users were having the issue; my username wasn't having the issue on system that other were having the issue.
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <br/>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       <ac:link>
        <ri:user ri:userkey="712020:20683bcb-b5d6-4474-a40c-2a3ae5aaee4f">
        </ri:user>
       </ac:link>
       : Migrate user(s) with UID "1000" to a new UID (Chris Higgs).
      </span>
     </ac:task-body>
    </ac:task>
    <ac:task>
     <ac:task-id>
      2
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       <ac:link>
        <ri:user ri:userkey="557058:037cebc0-7a1a-4a12-af72-7583a24ff5d6">
        </ri:user>
       </ac:link>
       and
       <ac:link>
        <ri:user ri:userkey="712020:20683bcb-b5d6-4474-a40c-2a3ae5aaee4f">
        </ri:user>
       </ac:link>
       : follow up w/ Qumulo support on this to understand the change and security implications.
      </span>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
