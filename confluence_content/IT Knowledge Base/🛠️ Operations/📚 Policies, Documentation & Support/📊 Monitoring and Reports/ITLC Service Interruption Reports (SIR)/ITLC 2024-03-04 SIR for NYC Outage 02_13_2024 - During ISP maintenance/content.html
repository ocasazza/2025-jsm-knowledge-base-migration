<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <ac:placeholder>
     Add labels to this report to make it easy to find outages that relate to the service or the sites that were affected. That will help us find and report on relevant related issues.
    </ac:placeholder>
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for NYC outage and downstream effects on 02/13/2024
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <p class="auto-cursor-target">
      <ac:structured-macro ac:macro-id="ef44d49a-e082-45a2-b908-f2b903e4863a" ac:name="jira" ac:schema-version="1">
       <ac:parameter ac:name="server">
        System JIRA
       </ac:parameter>
       <ac:parameter ac:name="serverId">
        ac6def98-2140-30c3-8103-4b52b8b31135
       </ac:parameter>
       <ac:parameter ac:name="key">
        ITINFRA-2651
       </ac:parameter>
      </ac:structured-macro>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           NYC External Services
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         ITINFRA-2651, ITINFRA-2655
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         impact is not limited to NYC (Users lost few services)
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <time datetime="2024-02-13">
         </time>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <time datetime="2024-02-13">
         </time>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
          </ri:user>
         </ac:link>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <ac:placeholder>
          Use // for date macro for the date the report was reviewed with the team or relevant stakeholders
         </ac:placeholder>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="557058:037cebc0-7a1a-4a12-af72-7583a24ff5d6">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:20683bcb-b5d6-4474-a40c-2a3ae5aaee4f">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:460d116b-6dd0-4201-9370-8098156f6d6f">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:71b2d823-3ea6-4303-ba75-6ea7f7537779">
          </ri:user>
         </ac:link>
         ,
         <ac:link>
          <ri:user ri:userkey="712020:668ed8e3-9979-4f45-ba67-1748ea426e8c">
          </ri:user>
         </ac:link>
         ,
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p class="p1">
    On
    <time datetime="2024-02-13">
    </time>
    , at approximately 9 PM EST, the primary NYC circuit was switched to backup GTT during the planned ISP maintenance. The following problems were being reported by users across the globe:
   </p>
   <ul>
    <li>
     PDX users were able to ping their desktops but could not SSH to it because home directories were hung.
    </li>
    <li>
     Users have lost  connectivity to cloud resources, which are hosted on AWS and GCP.
    </li>
    <li>
     Sites lost connectivity to the monitoring tools (librenms) causing this flood of alerts that got generated.
    </li>
   </ul>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     If this incident requires any background knowledge to understand or history that's relevant, include it here.
    </ac:placeholder>
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    The primary  internet circuit in NYC Lumen is undergoing scheduled maintenance. As a part of the failover activity,
    <ac:link>
     <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
     </ri:user>
    </ac:link>
    from the INFRA team failed over the link to the secondary GTT  link
    <ac:structured-macro ac:macro-id="e4516ba2-0176-40f7-b2f2-1dd6b9bdcbf8" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2588
     </ac:parameter>
    </ac:structured-macro>
    . Due to this, users faced connectivity issues.
   </p>
   <p>
    <br/>
   </p>
   <p>
    <br/>
   </p>
   <h3>
    Chronology
   </h3>
   <p>
    <br/>
   </p>
   <div class="css-11u50rl">
    <div class="css-k5cxwk">
     <div class="_16jlkb7n _1o9zkb7n _i0dl1osq _1ul9idpf _swxz1kw7">
      <div>
       <div class="ak-renderer-wrapper is-comment css-2c6ch1">
        <div class="css-1d10950">
         <div class="ak-renderer-document">
          <p>
           <time datetime="2024-02-13">
           </time>
           9:19 PM EST  : NYC planned failover due to planned Lumen maintenance completed by
           <ac:link>
            <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
            </ri:user>
           </ac:link>
           .
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           9:28 PM EST:  Failure was completed.
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           10:25 PM EST : Reports of systems in PDX hanging, as well as users being disconnected from customer LiveDesign instances across sites.
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           10:46 PM EST :
           <ac:link>
            <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
            </ri:user>
           </ac:link>
           mentions there seem to be routing issues for the PDX issue.
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           11:05 PM EST  : The routing issue is corrected for PDX, and things are back on track for PDX users.
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           11:30  PM  EST :
           <ac:link>
            <ri:user ri:userkey="640b97dd93cf25994632639f">
            </ri:user>
           </ac:link>
           added  the NYC  secondary office egress IP to the allowlist in the ELN security group for allowing access.
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           11:30 PM EST : communicated to the users to add the NYC  secondary office egress IP in the allowlist for all the security groups for the LD instances to resolve the issues with access.
          </p>
          <p>
           <time datetime="2024-02-13">
           </time>
           12:16 PM EST : LUMEN completed the maintenance, and NYC is reverting back to the primary  ISP to resolve all the remaining issues.
          </p>
          <p>
           <br/>
          </p>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
   <h3>
    Corrective Action
   </h3>
   <ul>
    <li>
     NYC GTT had the change in the IP address of the WAN IP's, which was changed on the interface level but not reflected on the configuration for the IPSEC tunnels. Due to this, all the secondary tunnels were down when the failover happened. Since NYC is the hub and main route reflector for us, all the spokes sites lost connectivity with NYC and the monitoring site (LibreNMS) during the issue. The team is working on correcting this issue.
    </li>
    <li>
     LD resources needs to add the new NYC egress WAN IP's in all the security groups so the connectivity will not be affected during the failover.
    </li>
    <li>
     Qumulo in PDX is configured with the feature that it sends  all authentication requests to funnel through just one AD ; this needs to be corrected so that it will send requests to other DCs when there is an outage.
    </li>
   </ul>
   <h3>
    Analysis
   </h3>
   <p>
    <br/>
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <ac:structured-macro ac:macro-id="55d5b508-f54d-41df-842b-aed4fa7f9bee" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-1591
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="d61d053a-878a-49ff-9834-8d805acad1f3" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2659
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="9719ca5f-893f-467c-9f36-9c9df060856d" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2655
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="4dcff4b2-fcb2-488b-b3f4-da3148f18ff1" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2644
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="1dcb527e-6cb6-45a4-a4a1-55cf9b51022f" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      Schrodinger JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter,customfield_11008
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter,Sprint
     </ac:parameter>
     <ac:parameter ac:name="maximumIssues">
      20
     </ac:parameter>
     <ac:parameter ac:name="jqlQuery">
      issue in linkedIssues(ITDW-123, "introduced")
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      30708cbf-faf5-3b5d-8703-8205cb365354
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    problem was quickly detected
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    Users started reporting in the IT-Hotline chat for the connectivity issues.
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    We cannot do much on the detection; this is mainly an issue with the connectivity with the cloud-hosted resources, some of which are not managed by the IT team.
   </p>
   <p>
    <br/>
   </p>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    We responded quickly to users queries in the IT hotline chat
   </p>
   <h3>
    Did we adequately communicate with our users?
   </h3>
   <p>
    We communicated adequately with the users regarding the maintenance activity.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    NA
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <ul>
    <li>
     Connectivity issues over the secondary link are still present, and the team is working to address the issues.
    </li>
   </ul>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <ul>
    <li>
     We need to configure the secondary GTT links and establish connectivity to all the required resources.
    </li>
    <li>
     Changes to Qumulos mean that they'll connect to a local Domain Controller instead of across the WAN.
     <ul>
      <li>
       This may still mean that they're dependent on a single DC and we need to discuss this with Qumulo support.
      </li>
     </ul>
    </li>
   </ul>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    Since we are taking steps to achieve high availability with our network, below are the initiatives we can  employ to reduce the failure rate.
   </p>
   <ul>
    <li>
     We need to keep the configuration of the primary and secondary links identical.
    </li>
    <li>
     We need to conduct periodic network failovers as a practice. So that we can understand what is missing and add those, and also make networks more resilient.
    </li>
    <li>
     Cloud resources, which are routed  internally, are mainly terminated in the NYC firewall. When we lose NYC connectivity, we are losing  connectivity to all these resources. This is particularly true for the machines connected over LAN. To mitigate this, we can establish the routing for these resources on the remaining hubs (something called a regional hub) so that we can reduce the impact on connectivity.
    </li>
   </ul>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <br/>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       Network team: Creating or repairing all VPN tunnels and BGP configurations using the GTT ISP circuit, to match the configuration and routes over the Lumen circuit as closely as possible.
      </span>
     </ac:task-body>
    </ac:task>
    <ac:task>
     <ac:task-id>
      2
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       Scheduled ISP Failover testing.
      </span>
     </ac:task-body>
    </ac:task>
    <ac:task>
     <ac:task-id>
      4
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       <ac:link>
        <ri:user ri:account-id="712020:20683bcb-b5d6-4474-a40c-2a3ae5aaee4f">
        </ri:user>
       </ac:link>
       : Get clarity from Qumulo support on the designed behavior of DC dependency.
      </span>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
