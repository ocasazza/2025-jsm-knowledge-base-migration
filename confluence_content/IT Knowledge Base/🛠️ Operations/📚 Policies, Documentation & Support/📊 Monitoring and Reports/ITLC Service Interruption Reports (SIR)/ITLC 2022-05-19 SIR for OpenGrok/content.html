<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <ac:placeholder>
     Add labels to this report to make it easy to find outages that relate to the service or the sites that were affected. That will help us find and report on relevant related issues.
    </ac:placeholder>
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for OpenGrok on 2022-05-19
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col style="width: 163.0px;"/>
       <col style="width: 502.0px;"/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <span style="color: rgb(0,51,102);">
         </span>
         <ac:link>
          <ri:page ri:content-title="OpenGrok" ri:space-key="SYSMGR">
          </ri:page>
         </ac:link>
         <span style="color: rgb(0,51,102);">
         </span>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="ae71e7d1-5c33-42d3-b9ad-17fd6a1741af" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             SYSMGR-64876
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         <ac:placeholder>
          If the outage was limited to a site(s) please link to the confluence location page(s)
         </ac:placeholder>
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2022-05-19">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2022-05-19">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="557058:07ac0593-24aa-4f1a-9f61-f6ed48eb34e3">
          </ri:user>
         </ac:link>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <time datetime="2022-07-14">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:page ri:content-title="ITLC 2022-07-14 SIR Review Board notes" ri:space-key="ITLC">
          </ri:page>
         </ac:link>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    A user,
    <span style="color: rgb(23,43,77);">
     Anand Kumar, reported in the IT Hotline that OpenGrok was not working. We restarted the services (httpd and tomcat) and this resolved the issue.
    </span>
   </p>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <p>
    This has been recently become an ongoing issue with OpenGrok with investigation as to the root cause. Other tickets recent tickets were
    <ac:structured-macro ac:macro-id="3203e9de-8f66-4842-bf54-465ff589db02" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      SYSMGR-64110
     </ac:parameter>
    </ac:structured-macro>
    and
    <ac:structured-macro ac:macro-id="48aaaaee-7439-4206-8a0d-50d2949ce1b0" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      SYSMGR-64230
     </ac:parameter>
    </ac:structured-macro>
    .Â  Investigation in
    <ac:structured-macro ac:macro-id="1fdc8e15-118d-4b03-8335-035c433f9311" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      SYSMGR-62950
     </ac:parameter>
    </ac:structured-macro>
    and subsequent team discussions indicated doing an upgrade of OpenGrok could solve this, but in the meantime, we'd try a full re-index.
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    The incident is summarized in the Chronology section below.
   </p>
   <h3>
    Chronology
   </h3>
   <p>
    <span style="letter-spacing: 0.0px;">
     PagerDuty incident escalated to
     <ac:link>
      <ri:user ri:userkey="557058:c19c6239-8657-4845-b158-eec62442daf4">
      </ri:user>
     </ac:link>
     at 7:26am Eastern
    </span>
   </p>
   <p>
    <span style="letter-spacing: 0.0px;">
     Reported by Anand Kumar at 8:07am Eastern
    </span>
   </p>
   <p>
    <span style="letter-spacing: 0.0px;">
     Escalated by
     <ac:link>
      <ri:user ri:userkey="712020:be0141d8-2f03-45a8-8a4e-3cdd257f9a2a">
      </ri:user>
     </ac:link>
     at 8:32am Eastern
    </span>
   </p>
   <p>
    <ac:link>
     <ri:user ri:userkey="557058:07ac0593-24aa-4f1a-9f61-f6ed48eb34e3">
     </ri:user>
    </ac:link>
    restarted the OpenGrok services following SOP
    <ac:link ac:anchor="Restartingthewebapp">
     <ri:page ri:content-title="Log File Locations" ri:space-key="SYSMGR">
     </ri:page>
    </ac:link>
    at 9:19am Eastern after which OpenGrok started working again.
   </p>
   <p>
    <br/>
   </p>
   <h3>
    Corrective Action
   </h3>
   <p>
    Restarted services following SOP
    <ac:link ac:anchor="Restartingthewebapp">
     <ri:page ri:content-title="Log File Locations" ri:space-key="SYSMGR">
     </ri:page>
    </ac:link>
   </p>
   <p>
    Also added
    <ac:link>
     <ri:user ri:userkey="712020:be0141d8-2f03-45a8-8a4e-3cdd257f9a2a">
     </ri:user>
    </ac:link>
    to AllowUsers in /etc/ssh/sshd_config on pdx-opengrok-lv03 and ran 'systemctl reload sshd'.
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    On pdx-opengrok-lv03:
   </p>
   <p>
    /var/log/httpd/error_log has:
   </p>
   <ac:structured-macro ac:macro-id="199b34a9-4f85-4285-8d57-e6fd4d6ad78f" ac:name="code" ac:schema-version="1">
    <ac:plain-text-body>
     <![CDATA[[Sun May 15 03:13:01.814002 2022] [core:notice] [pid 721611:tid 140516523850048] AH00094: Command line: '/usr/sbin/httpd -D FOREGROUND'
[Thu May 19 04:57:06.520106 2022] [mpm_event:error] [pid 721611:tid 140516523850048] AH00484: server reached MaxRequestWorkers setting, consider raising the MaxRequestWorkers setting
[Thu May 19 06:15:07.608892 2022] [mpm_event:notice] [pid 721611:tid 140516523850048] AH00492: caught SIGWINCH, shutting down gracefully]]>
    </ac:plain-text-body>
   </ac:structured-macro>
   <p>
    <span style="letter-spacing: 0.0px;">
     04:57 Pacific is 7:57am Eastern, and corresponds closely with the report by Anand Kumar at 8:07am Eastern. 06:15 Pacific is 9:15 Eastern, the first time
     <ac:link>
      <ri:user ri:userkey="557058:07ac0593-24aa-4f1a-9f61-f6ed48eb34e3">
      </ri:user>
     </ac:link>
     shut ran 'systemctl restart httpd' per our procedures.
    </span>
   </p>
   <p>
    <span style="letter-spacing: 0.0px;">
     However, further investigation shows a PagerDuty alert was triggered at 7:21am Eastern, which was much before 7:57. So, MaxRequestWorkers might not be as relevant.
    </span>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    It seems LibreNMS did create a PagerDuty alert
    <a href="https://schrodinger-it.pagerduty.com/incidents/Q2YUO7R31CRX89">
     https://schrodinger-it.pagerduty.com/incidents/Q2YUO7R31CRX89
    </a>
    . It was escalated to
    <ac:link>
     <ri:user ri:userkey="557058:c19c6239-8657-4845-b158-eec62442daf4">
     </ri:user>
    </ac:link>
    at 7:26am Eastern (4:26am Pacific), but snoozed for 5 hours.
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    Via LibreNMS initially, and a user reported the issue in the IT Hotline
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    The detection was good. It's the alerting which perhaps could be approved, so that alerts get routed to those who are already awake. In this case,
    <ac:link>
     <ri:user ri:userkey="712020:be0141d8-2f03-45a8-8a4e-3cdd257f9a2a">
     </ri:user>
    </ac:link>
    was online, and this was also during business hours for
    <ac:link>
     <ri:user ri:userkey="712020:6cc5fe14-18f0-4992-8e3b-399b3995c607">
     </ri:user>
    </ac:link>
    .
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    The PagerDuty issue was escalated at 7:26am Eastern.
   </p>
   <p>
    A user reported the issue at 8:07am.
   </p>
   <p>
    <ac:link>
     <ri:user ri:userkey="712020:be0141d8-2f03-45a8-8a4e-3cdd257f9a2a">
     </ri:user>
    </ac:link>
    replied to the user in the IT HotlineÂ  within 30min, and the issue was resolved a little more than an hour after it was reported by the user.
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    <ac:link>
     <ri:user ri:userkey="712020:be0141d8-2f03-45a8-8a4e-3cdd257f9a2a">
     </ri:user>
    </ac:link>
    responded in the IT Hotline that we were investigating, and
    <ac:link>
     <ri:user ri:userkey="557058:07ac0593-24aa-4f1a-9f61-f6ed48eb34e3">
     </ri:user>
    </ac:link>
    replied there when the issue was resolved.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    <ac:placeholder>
     Describe here any ways we can or should make our communication better.
    </ac:placeholder>
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    We had a written procedure for restarting the service
    <ac:link ac:anchor="Restartingthewebapp">
     <ri:page ri:content-title="Log File Locations" ri:space-key="SYSMGR">
     </ri:page>
    </ac:link>
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    Having PagerDuty alerts routed, when possible, to those who might already be awake and working.
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    This SIR was reviewed and adjusted after the full re-index in
    <ac:structured-macro ac:macro-id="59deed1b-7a7a-4aa0-93d7-41134e40a294" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      SYSMGR-62950
     </ac:parameter>
    </ac:structured-macro>
    was completed and seemed to solve the problem.Â  However, we'll still proceed with upgrading OpenGrok.
   </p>
   <p>
    Also, granting
    <ac:link>
     <ri:user ri:userkey="712020:be0141d8-2f03-45a8-8a4e-3cdd257f9a2a">
     </ri:user>
    </ac:link>
    ssh access to pdx-opengrok-lv03 (complete) will allow Babu to restart the services if necessary.
   </p>
   <p>
    Having PagerDuty alerts routed, when possible, to those who might already be awake and working.
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     After analyzing and talking about this incident what actions did the reviewers and management decide should be done to address shortfalls in detection, mitigation or avoidance. Use tasks, assignments and due dates or link to created jira tickets.
    </ac:placeholder>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      complete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       Spin up an ITPRJ ticket to review PagerDuty settings to see if we can further improve incident routing
       <ac:structured-macro ac:macro-id="11b9a58c-9f4f-4d5f-9a81-a96e5a0b3f64" ac:name="jira" ac:schema-version="1">
        <ac:parameter ac:name="server">
         System JIRA
        </ac:parameter>
        <ac:parameter ac:name="serverId">
         ac6def98-2140-30c3-8103-4b52b8b31135
        </ac:parameter>
        <ac:parameter ac:name="key">
         ITPRJ-3277
        </ac:parameter>
       </ac:structured-macro>
      </span>
     </ac:task-body>
    </ac:task>
    <ac:task>
     <ac:task-id>
      8
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       <ac:structured-macro ac:macro-id="38eb5fc8-0aab-43be-8e6d-93f733f55eb7" ac:name="jira" ac:schema-version="1">
        <ac:parameter ac:name="server">
         System JIRA
        </ac:parameter>
        <ac:parameter ac:name="serverId">
         ac6def98-2140-30c3-8103-4b52b8b31135
        </ac:parameter>
        <ac:parameter ac:name="key">
         ITDW-318
        </ac:parameter>
       </ac:structured-macro>
      </span>
     </ac:task-body>
    </ac:task>
    <ac:task>
     <ac:task-id>
      6
     </ac:task-id>
     <ac:task-status>
      complete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       <ac:structured-macro ac:macro-id="b02df24b-7dfc-4310-b3b7-09e113147dfe" ac:name="jira" ac:schema-version="1">
        <ac:parameter ac:name="server">
         System JIRA
        </ac:parameter>
        <ac:parameter ac:name="serverId">
         ac6def98-2140-30c3-8103-4b52b8b31135
        </ac:parameter>
        <ac:parameter ac:name="key">
         ITDW-319
        </ac:parameter>
       </ac:structured-macro>
      </span>
     </ac:task-body>
    </ac:task>
    <ac:task>
     <ac:task-id>
      7
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       <ac:structured-macro ac:macro-id="c61a4cb5-0fa6-40c0-8f0a-b70d96557642" ac:name="jira" ac:schema-version="1">
        <ac:parameter ac:name="server">
         System JIRA
        </ac:parameter>
        <ac:parameter ac:name="serverId">
         ac6def98-2140-30c3-8103-4b52b8b31135
        </ac:parameter>
        <ac:parameter ac:name="key">
         ITINFRA-349
        </ac:parameter>
       </ac:structured-macro>
      </span>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <p>
    <br/>
   </p>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
