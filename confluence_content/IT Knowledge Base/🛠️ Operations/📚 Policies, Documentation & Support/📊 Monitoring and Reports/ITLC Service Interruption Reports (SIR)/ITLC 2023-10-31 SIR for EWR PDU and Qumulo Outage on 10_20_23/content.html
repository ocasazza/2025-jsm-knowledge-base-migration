<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    Bolt PDU EWR power Qumulo
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for EWR PDUs in rack
      <span style="color: rgb(23,43,77);">
       203.M22.01.03
      </span>
      on
      <time datetime="2023-10-20">
      </time>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           Bolt / Qumulo
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="eb527b12-5519-4e7f-9cc6-c55104625646" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITINFRA-2211
            </ac:parameter>
           </ac:structured-macro>
          </p>
          <p>
           <ac:structured-macro ac:macro-id="21db79b5-44e0-4360-99f6-df14ac2819de" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITINFRA-2212
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         <p>
          EWR
         </p>
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2023-10-20">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2023-10-31">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         Sean McManus
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <ac:placeholder>
          Use // for date macro for the date the report was reviewed with the team or relevant stakeholders
         </ac:placeholder>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:placeholder>
          List of people who had a part in reviewing or commenting on the report
         </ac:placeholder>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    <span style="letter-spacing: 0.0px;">
     Two PDUs, several Bolt nodes, and one Qumulo node all went offline at ~12:50p ET.
    </span>
   </p>
   <p>
    <br/>
   </p>
   <p>
    <span style="font-size: 20.0px;letter-spacing: -0.008em;">
     Background
    </span>
   </p>
   <hr/>
   <p>
    Per Klaus,
    <span style="letter-spacing: 0.0px;">
     Digital Realty performed generator maintenance in the datacenter on Thursday 10/19, and UPS battery load testing on Friday, 10/20. I haven't determined any clear causality from those maintenances for our rack outage, but the timing makes it seem like a distinct possibility.
    </span>
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    <span>
     Two PDUs went offline, taking down most of the devices in the same rack (
     <span style="color: rgb(25,25,25);">
      203.M22.01.03).
     </span>
    </span>
   </p>
   <p>
    <span>
     The affected systems were:
    </span>
   </p>
   <ul>
    <li>
     <span>
      PDU ewr-pdu-0103A
     </span>
    </li>
    <li>
     <span>
      PDU ewr-pdu-0103B
     </span>
    </li>
    <li>
     Bolt nodes bolt-0-10 through -18
    </li>
    <li>
     The Qumulo node ewr-stor-q01-6
    </li>
    <li>
     The switch in this rack did not go offline for unknown reasons, and this will be investigated during an EWR visit on Tuesday, 12/5.
    </li>
   </ul>
   <h3>
    Chronology
   </h3>
   <ul>
    <li>
     12:53pm EDT - PDUs ewr-pdu-0103A and B go down, according to LibreNMS
    </li>
    <li>
     1:03pm - First Pagerduty alert is sent
    </li>
    <li>
     1:13pm -
     <ac:link>
      <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
      </ri:user>
     </ac:link>
     updated the IT-SOS Escalations chat that he was paged about two PDUs being down in rack 01.03 (he was off but was the on-call person that hour).
    </li>
    <li>
     ~1:52pm - Digital Realty Smarthands tickets opened by James and Sean to investigate the offline Qumulo
     <span style="color: rgb(136,149,168);">
      <span style="color: rgb(0,0,0);">
       ewr-stor-q01-6
      </span>
     </span>
     and the PDUs, respectively, in rack 01.03 and power on if necessary.
    </li>
    <li>
     ~2:30pm - Smarthands tech updates that PDUs are switched on but the breakers are tripped.
    </li>
    <li>
     3:24pm - Alex asks and Klaus confirms that Bolt nodes bolt-0-10 through -18 are unreachable.
    </li>
    <li>
     ~3:15pm - 3:50pm - The tech unplugs all power cords from PDUs 0103a and b, one PDU at a time, flips the breakers on, and then plugs in each device, one at a time.
    </li>
    <li>
     4:08 pm - James confirms via chat that the Qumulo node
     <span style="color: rgb(0,0,0);">
      ewr-stor-q01-6
     </span>
     is back online.
    </li>
    <li>
     Soon after, HPC confirms that the Bolt nodes are back online (I'm unable to find the exactly chats and times for this).
    </li>
   </ul>
   <h3>
    Corrective Action
   </h3>
   <p>
    Smarthands tickets were opened with Digital Realty to investigate the power in this rack, and ultimately they flipped on the tripped breakers for each PDU, bringing the PDUs, the Qumulo nodes, and the Bolt nodes back online.
   </p>
   <p>
    Also, Qumulo support was reporting issues with the left PSU on ewr-stor-q01-6, and after some troubleshooting it was determent that the PSU was faulty and a replacement unit was sent and swapped in (new PSU was confirmed to be stable via the QUmulo slack chat). [ITINFRA-2211]
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    Both PDUs show frequent 'near-overload' warnings in their system logs that clear soon after. This happens occasionally in other racks' PDUs that were spot-checked, but they are near constant in 01.03. This near-overload condition likely made it possible for each PDU to trip as a result of generator and battery load testing being done by DR on 10/20 and the day before.
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <br/>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffa3430c-a10c-4dbd-b147-e23313736e3f" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter,customfield_11008
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter,Sprint
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITINFRA-2280
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <p>
    <span style="font-size: 20.0px;letter-spacing: -0.008em;">
     <ac:structured-macro ac:macro-id="74fe55d1-e3c9-4f0b-8d34-37e5bb4dd045" ac:name="jira" ac:schema-version="1">
      <ac:parameter ac:name="server">
       System JIRA
      </ac:parameter>
      <ac:parameter ac:name="columnIds">
       issuekey,priority,status,summary,created,updated,reporter,customfield_11008
      </ac:parameter>
      <ac:parameter ac:name="columns">
       key,priority,status,summary,created,updated,reporter,Sprint
      </ac:parameter>
      <ac:parameter ac:name="serverId">
       ac6def98-2140-30c3-8103-4b52b8b31135
      </ac:parameter>
      <ac:parameter ac:name="key">
       ITINFRA-2211
      </ac:parameter>
     </ac:structured-macro>
    </span>
   </p>
   <p>
    <span style="font-size: 20.0px;letter-spacing: -0.008em;">
     <span>
      <ac:structured-macro ac:macro-id="11ead071-8949-4ba3-8d30-92b5dac65990" ac:name="jira" ac:schema-version="1">
       <ac:parameter ac:name="server">
        System JIRA
       </ac:parameter>
       <ac:parameter ac:name="columnIds">
        issuekey,priority,status,summary,created,updated,reporter,customfield_11008
       </ac:parameter>
       <ac:parameter ac:name="columns">
        key,priority,status,summary,created,updated,reporter,Sprint
       </ac:parameter>
       <ac:parameter ac:name="serverId">
        ac6def98-2140-30c3-8103-4b52b8b31135
       </ac:parameter>
       <ac:parameter ac:name="key">
        ITINFRA-2212
       </ac:parameter>
      </ac:structured-macro>
     </span>
    </span>
   </p>
   <p>
    <span style="font-size: 20.0px;letter-spacing: -0.008em;">
     Detection
    </span>
   </p>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    ~20 minutes after the PDUs went offline
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    Nathaniel was paged through Pagerduty and he notified Infra through chat.
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    Working on ensuring that the on-call person is not on PTO may help. This is as close to as good as the speed of detection gets in terms of paging, without setting alerts to page more frequently, which could cause false-positives coming from brief connectivity hiccups. A Pagerduty alert after five minutes instead of ten may work well, if possible.
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    Within ~45 minutes, the issue was being investigated and led to Smarthands tickets being opened with Digital Realty.
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    The issue was only communicated to IT internally initially, and did not seem to have a noticeable affect on users more widely.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    It may not be advantageous to proactively communicate this problem more widely unless we're certain there will be a noticeable slowdown in Bolt functionality.
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    Other Bolt nodes beside the ones in the affected rack seemed to have carried the weight during the outage (as far as IT can tell from a lack of messages in the IT Support Hotline chat or escalated tickets). No hardware failures resulted from the ungraceful shutdown of devices.
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    The on-call person was on PTO which likely slowed down the notification to the team - avoiding that situation could help. Also, possibly a faster response from a team member to the chat notification, circumstances permitting.
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    Better distributing the power load among available PDUs in the racks, or more likely at this point, replacing the PDUs in this rack with PDUs that can handle a larger power draw.
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     After analyzing and talking about this incident what actions did the reviewers and management decide should be done to address shortfalls in detection, mitigation or avoidance. Use tasks, assignments and due dates or link to created jira tickets.
    </ac:placeholder>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       Work w/ DR and HPC to replace the PDUs in this rack w/ PDUs that would allow us to use all three banks. Nathaniel, James, and Sean are visiting the EWR data center on Tuesday, 12/5.
      </span>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
