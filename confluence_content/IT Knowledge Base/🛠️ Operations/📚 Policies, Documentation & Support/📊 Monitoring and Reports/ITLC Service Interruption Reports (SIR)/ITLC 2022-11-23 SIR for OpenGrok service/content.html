<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <ac:placeholder>
     Add labels to this report to make it easy to find outages that relate to the service or the sites that were affected. That will help us find and report on relevant related issues.
    </ac:placeholder>
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for OpenGrok on
      <time datetime="2022-11-23">
      </time>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <ac:link>
            <ri:page ri:content-title="OpenGrok" ri:space-key="SYSMGR">
            </ri:page>
           </ac:link>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="285721a3-61b7-4ccf-8e61-0694313ba963" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITDW-855
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         OpenGrok server
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2022-11-23">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2022-11-23">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <ac:link>
            <ri:user ri:userkey="557058:dd3ca0b8-81b7-46aa-8e00-307cacc52045">
            </ri:user>
           </ac:link>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <time datetime="2022-12-01">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:page ri:content-title="ITLC 2022-12-01 SIR Review Board notes" ri:space-key="ITLC">
          </ri:page>
         </ac:link>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    On the morning of Wednesday, November 23 users reported the OpenGrok web site and service. The system was found with a misbehaving Java process consuming 250% CPU and pushing the system to a load of 3.0+. A system reboot restored working order after attempts to start individual services failed.
   </p>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <p>
    OpenGrok is a search engine for our code and used by developers as part of the development process. The OpenGrok server typically runs with near 0 load.
   </p>
   <p>
    Problems similar to this have been tackled in
    <ac:link>
     <ri:page ri:content-title="ITLC 2022-05-19 SIR for OpenGrok" ri:space-key="ITLC">
     </ri:page>
    </ac:link>
    and
    <ac:link>
     <ri:page ri:content-title="ITLC 2022-04-27 SIR for OpenGrok Webserver down" ri:space-key="ITLC">
     </ri:page>
    </ac:link>
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    There's nothing to add here that isn't captured in the chronology, corrective action and analysis.
   </p>
   <h3>
    Chronology
   </h3>
   <ac:structured-macro ac:macro-id="57f617fc-1516-45c4-91f5-161a12850ac5" ac:name="info" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      All times in PT. Actions undertaken by others is approximated based on times from chat history.
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p>
    <br/>
   </p>
   <table class="wrapped">
    <colgroup>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr>
      <th>
       Time
      </th>
      <th>
       Action
      </th>
      <th colspan="1">
       Who
      </th>
     </tr>
     <tr>
      <td>
       09:43
      </td>
      <td>
       First user report of system failure in IT Support Hotline
      </td>
      <td colspan="1">
       Stefan Mashkevich and 4 others
      </td>
     </tr>
     <tr>
      <td>
       09:47
      </td>
      <td>
       PagerDuty alert generated
      </td>
      <td colspan="1">
       <br/>
      </td>
     </tr>
     <tr>
      <td colspan="1">
       09:51
      </td>
      <td colspan="1">
       Problem escalated in IT-SOS chat room
      </td>
      <td rowspan="2">
       <div class="content-wrapper">
        <p>
         <ac:link>
          <ri:user ri:userkey="712020:8bb77617-132e-4a8e-99f8-29295efeb8fe">
          </ri:user>
         </ac:link>
        </p>
        <p>
         <br/>
        </p>
       </div>
      </td>
     </tr>
     <tr>
      <td colspan="1">
       09:58
      </td>
      <td colspan="1">
       Begin investigation
      </td>
     </tr>
     <tr>
      <td colspan="1">
       10:03
      </td>
      <td colspan="1">
       PagerDuty alert acknowledged
      </td>
      <td rowspan="4">
       <div class="content-wrapper">
        <p>
         <ac:link>
          <ri:user ri:userkey="557058:dd3ca0b8-81b7-46aa-8e00-307cacc52045">
          </ri:user>
         </ac:link>
        </p>
        <p>
         <br/>
        </p>
       </div>
      </td>
     </tr>
     <tr>
      <td colspan="1">
       10:30
      </td>
      <td colspan="1">
       Begin investigation
      </td>
     </tr>
     <tr>
      <td colspan="1">
       10:35
      </td>
      <td colspan="1">
       <p>
        Attempt restart of Tomcat service
       </p>
       <p>
        Tomcat service stopped but problem persists
       </p>
      </td>
     </tr>
     <tr>
      <td colspan="1">
       10:42
      </td>
      <td colspan="1">
       System rebooted and verified working
      </td>
     </tr>
    </tbody>
   </table>
   <h3>
    Corrective Action
   </h3>
   <p>
    System was fully rebooted. Attempts to stop the failing service didn't kill runaway process.
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    Top output was examined during the problem. Load was measured at 3.0+ and a high-PID java process was consuming 250%+ CPU. SSH was also sluggish which typically suggests an overloaded system and the high PID for the java process suggests there might have been numerous problems that caused the service processes to restart on their own.
   </p>
   <p>
    Rebooting was probably the right move here anyway.
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <ac:placeholder>
     Edit the macro below to replace the issue ID in the JQL query
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="1dcb527e-6cb6-45a4-a4a1-55cf9b51022f" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter,customfield_11008
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter,Sprint
     </ac:parameter>
     <ac:parameter ac:name="maximumIssues">
      20
     </ac:parameter>
     <ac:parameter ac:name="jqlQuery">
      issue in linkedIssues(ITDW-123, "introduced")
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    Based on the 5-minute lag on PagerDuty alerts it seems reasonable to approximate the failure point at 09:42. User discovered and reported the problem within 1 minute and (by design) our alert triggered 5 minutes later.
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    Both by user report and automated monitoring alert
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    Detection seems as good as possible in this case.
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    IT began responding 8 minutes after the initial response.
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    User communication was through the IT Support Hotline chat.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    Given the small blast radius of this failure and the abbreviated time-to-repair this was probably adequate and appropriate.
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    Problem occurred during the workday when IT Ops was monitoring the support line chat. This helped reponse time. The blast-radius of this service is pretty small, confined exclusively to our developer population. The problem also took place on the day before Thanksgiving holiday in the US and the population of people working or relying on the service was probably smaller than normal.
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    Nothing comes to mind here. Even if this failure wasn't minimized by the factors noted above it still wouldn't produce a significant business or functional impact if this problem occurred more frequently, more severely or took longer to resolve. This service represents a useful and valuable but not essential service to developers.
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    This problem (or other like it) might be avoided by following through on our plans to upgrade this service to newer code revisions
    <ac:structured-macro ac:macro-id="a94e4e81-b116-4cb6-8fb3-783f058076ce" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
     <ac:parameter ac:name="key">
      ITDW-318
     </ac:parameter>
    </ac:structured-macro>
    in the fullness of time.
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     After analyzing and talking about this incident what actions did the reviewers and management decide should be done to address shortfalls in detection, mitigation or avoidance. Use tasks, assignments and due dates or link to created jira tickets.
    </ac:placeholder>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      complete
     </ac:task-status>
     <ac:task-body>
      <ac:structured-macro ac:macro-id="952d95b3-86c1-493a-a13f-d550f9221c57" ac:name="jira" ac:schema-version="1">
       <ac:parameter ac:name="server">
        System JIRA
       </ac:parameter>
       <ac:parameter ac:name="serverId">
        ac6def98-2140-30c3-8103-4b52b8b31135
       </ac:parameter>
       <ac:parameter ac:name="key">
        ITDW-858
       </ac:parameter>
      </ac:structured-macro>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
