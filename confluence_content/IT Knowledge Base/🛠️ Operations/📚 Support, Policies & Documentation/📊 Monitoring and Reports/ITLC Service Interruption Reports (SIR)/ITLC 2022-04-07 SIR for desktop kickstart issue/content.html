<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    Linux kickstart desktop
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      SIR for Linux desktop kickstart installation  on 2022-0407
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         Linux desktop kickstart installation
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="221c686c-2c71-4d83-869b-0ef8b8901109" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             SYSMGR-64020
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         Sysmgrs not able to install new Linux desktop successfully
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2022-04-07">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2022-04-25">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <ac:link>
          <ri:user ri:userkey="557058:8aff9fa7-fab5-4a58-8371-4bbe29336cd2">
          </ri:user>
         </ac:link>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <time datetime="2022-04-26">
           </time>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <ac:link>
            <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
            </ri:user>
           </ac:link>
          </p>
         </div>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    On April 07, 2022, Nate and other sysmgrs tried kickstart installing Linux Desktop at NYC office. After installation, the newly installed desktop machine does not have graphical interface for user login.  The newly installed machine is reachable via ssh or can log in from text console.
   </p>
   <p>
    <br/>
   </p>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <p>
    Linux desktop machine is installed via network PXE kickstart service to ensure consistency and full configuration for Schrodinger network.
   </p>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    On April 07, 2022, Nate and other sysmgrs tried kickstart installing Linux Desktop at NYC office. After installation, the newly installed desktop machine does not have graphical interface for user login.  The newly installed machine is reachable via ssh or can log in from text console.
   </p>
   <h3>
    Chronology
   </h3>
   <p>
    Nate tried installing Linux desktop machine and found the installation issue on
    <time datetime="2022-04-07">
    </time>
    and opened a sysmgr ticket
    <a class="issue-link" href="https://schrodinger.atlassian.net/browse/SYSMGR-64020">
     SYSMGR-64020
    </a>
   </p>
   <p>
    <span style="letter-spacing: 0.0px;">
     Nate and Simon looked at the issue over a meeting on
    </span>
    <time datetime="2022-04-08">
    </time>
    <span style="letter-spacing: 0.0px;">
     The root cause was determined: nvidia driver was not installed during kickstart installation.  To troubleshoot the issue, the temporary changes are made to prod/nvidia/init.sls file
    </span>
   </p>
   <p>
    Nate did another kickstart install on
    <time datetime="2022-04-12">
    </time>
    The kickstart installation took a very long time (more than 3 hours).  Checking the installation processes, found the salt highstate got stuck with installing Google chrome.  Manually killing the chrome install command, kickstart installation went ahead completed successfully (google chrome did get installed fine, but there was bug with salt which lead to install stuck).  Made another temporary changes to prod/chrome/init.sls, which resolved the install hange issue.
   </p>
   <p>
    Shabbir did one installation on
    <time datetime="2022-04-21">
    </time>
    and two installations on
    <time datetime="2022-04-25">
    </time>
    Both of the installations completed successfully.  It's now confirmed that the temporary changes fixed the issue. The same changes have been committed to salt master branch and pushed to the salt master.
   </p>
   <h3>
    Corrective Action
   </h3>
   <p>
    First fixed the nvidia driver not being installed issue
   </p>
   <p>
    Second, fixed the google chrome install hang issue
   </p>
   <h3>
    Analysis
   </h3>
   <p>
    The kickstart issue was caused by failing to install nvidia driver and goolge chrome installation hang.  Both issues are due to the recent changes to state chrome and nvidia. All other parts of the installation are fine.
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <p>
    Sysmgr found the issue during new desktop installation 2-3 weeks after the changes made to chrome and nvidia
   </p>
   <h3>
    How was the problem detected?
   </h3>
   <p>
    The issue was detected by sysmgrs when installing new desktop machines
   </p>
   <h3>
    How can detection be improved?
   </h3>
   <p>
    After any salt code changes, a full/reinstall should be performed to confirm it does not break new install.
   </p>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    Sysmgrs immediately started working on the issue. A sysmgr ticket was created to track and investigate the issue
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    Linux desktop install is a service for sysmgr.  Jira ticket was created for posting updates.
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    N/A
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    Fixed a few machines by manually installing nvidia driver. So new desktop machines can be deployed.
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    Fix the newly installed machine so they can be assigned to end users
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    A full/re-kickstart installation can detect the issue right after the salt code changes.  For future salt code changes, let's also run a kickstart installation to verify.
   </p>
   <p>
    <br/>
   </p>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     After analyzing and talking about this incident what actions did the reviewers and management decide should be done to address shortfalls in detection, mitigation or avoidance. Use tasks, assignments and due dates or link to created jira tickets.
    </ac:placeholder>
   </p>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
