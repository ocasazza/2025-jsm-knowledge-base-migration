<ac:layout>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <p>
    <ac:placeholder>
     Add labels to this report to make it easy to find outages that relate to the service or the sites that were affected. That will help us find and report on relevant related issues.
    </ac:placeholder>
   </p>
   <ac:structured-macro ac:macro-id="6041cfab-a8b7-40c8-aa32-0229b207b0df" ac:name="excerpt" ac:schema-version="1">
    <ac:parameter ac:name="atlassian-macro-output-type">
     INLINE
    </ac:parameter>
    <ac:rich-text-body>
     <p>
      <span style="color: rgb(23,43,77);">
       SIR for SAN Primary ISP on 01/28/24
      </span>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="two_equal">
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="b2a57857-7f56-44d2-a0d4-91b3d7ebfcbf" ac:name="toc-zone" ac:schema-version="1">
    <ac:rich-text-body>
     <p>
      <ac:structured-macro ac:macro-id="58b18781-a929-4005-a5e0-2ef23adca3fe" ac:name="toc" ac:schema-version="1">
      </ac:structured-macro>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
  <ac:layout-cell>
   <p class="auto-cursor-target">
    <br/>
   </p>
   <ac:structured-macro ac:macro-id="0db3d9b8-3a8d-4ad4-ae26-0a4ea4bc95c2" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="id">
     SIR-metadata
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped" style="letter-spacing: 0.0px;">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th colspan="1">
         System/Service
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           SAN ISP Outage. All SAN related network equipment.
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Ticket(s)
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <ac:structured-macro ac:macro-id="f4277739-6f09-4841-a5fe-c3dea4f5fc4a" ac:name="jira" ac:schema-version="1">
            <ac:parameter ac:name="server">
             System JIRA
            </ac:parameter>
            <ac:parameter ac:name="columnIds">
             issuekey,summary,issuetype,created,updated,duedate,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="columns">
             key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution
            </ac:parameter>
            <ac:parameter ac:name="serverId">
             ac6def98-2140-30c3-8103-4b52b8b31135
            </ac:parameter>
            <ac:parameter ac:name="key">
             ITINFRA-2561
            </ac:parameter>
           </ac:structured-macro>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Outage scope
        </th>
        <td colspan="1">
         Entire SAN network was down due to a primary ISP outage.
        </td>
       </tr>
       <tr>
        <th>
         Outage date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2024-01-28">
           </time>
           <span style="color: rgb(23,43,77);">
           </span>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th>
         Report date
        </th>
        <td>
         <div class="content-wrapper">
          <p>
           <time datetime="2024-01-28">
           </time>
           <span style="color: rgb(23,43,77);">
           </span>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report filed by
        </th>
        <td colspan="1">
         <div class="content-wrapper">
          <p>
           <ac:link>
            <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
            </ri:user>
           </ac:link>
          </p>
         </div>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Report reviewed date
        </th>
        <td colspan="1">
         <ac:placeholder>
          Use // for date macro for the date the report was reviewed with the team or relevant stakeholders
         </ac:placeholder>
        </td>
       </tr>
       <tr>
        <th colspan="1">
         Reviewed by
        </th>
        <td colspan="1">
         <ac:placeholder>
          List of people who had a part in reviewing or commenting on the report
         </ac:placeholder>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
 <ac:layout-section ac:type="single">
  <ac:layout-cell>
   <h2>
    Executive summary
   </h2>
   <hr/>
   <p>
    At around 8:45AM EST on 01/28, the Lumen primary internet circuit in SAN was experiencing packet loss. Nathaniel Williams was the  on-call and informed  the IT-SOS (Escalations) chat at ~8:48PM EST that there were PagerDuty alerts about SAN devices being unreachable.
   </p>
   <p>
    Due to our OOB management switch not being installed and configured we could not access the firewall remotely and therefore had to wait for someone to come onsite to failover to our secondary ISP GTT in SAN.
   </p>
   <p>
    Scottie  arrived on-site at ~10:10AM EST on 01/29/2024. Nathaniel W. and
    <ac:link>
     <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
     </ri:user>
    </ac:link>
    jumped on a call to assist with the failover. SAN was on the secondary ISP by 10:20AM EST.
    <br/>
    Ultimately, service was restored on the Lumen circuit after the bad Network card was replaced by Lumen techs in the data center.
   </p>
   <h2>
    <span>
     Background
    </span>
   </h2>
   <hr/>
   <ul>
    <li>
     Lumen is the Primary ISP in the SAN office.
    </li>
    <li>
     Took call to failover to the secondary circuit (APX).
    </li>
    <li>
     Once SAN was on the secondary circuit Wifi got restored. (Before office opened.)
    </li>
    <li>
     Communicated with SAN Users and informed them when service went down and was restored.
     <ul>
      <li>
       Laven sent out email communication to SAN users when the ISP went down.
      </li>
      <li>
       Nathaniel W. sent out email communication to SAN users when failover to secondary was complete and service was restored.
      </li>
     </ul>
    </li>
   </ul>
   <h2>
    Incident Description
   </h2>
   <hr/>
   <p>
    <br/>
   </p>
   <p>
    San Diego office
    <span style="color: rgb(23,43,77);">
     PrimaryISP (Lumen)  is down due to the ISP issue. Failed Network Card.
    </span>
   </p>
   <h3>
    Chronology
   </h3>
   <p>
    Incident Reported :-
    <span>
    </span>
    <time datetime="2024-01-28">
    </time>
    <span>
    </span>
    @8:48 PM EST.
   </p>
   <p>
    <span>
     Identified issue with the ISP :-
    </span>
    <time datetime="2024-01-28">
    </time>
    <span>
    </span>
    <span>
     @9:00 AM EST.
    </span>
   </p>
   <p>
    <span style="color: rgb(0,0,0);">
     Nathaniel Williams opened support ticket with Lumen when acknowledged the ISP gateway was unreachable. :-
    </span>
    <time datetime="2024-01-28">
    </time>
    <span style="color: rgb(0,0,0);">
     09:04 PM EST
    </span>
   </p>
   <p>
    <span>
     Attempted to failover via opengear, TFE and access FW from secondary tunnel. (No luck.)
     <time datetime="2024-01-28">
     </time>
     <span style="color: rgb(23,43,77);">
     </span>
    </span>
   </p>
   <p>
    <span>
     <span style="color: rgb(23,43,77);">
      Was informed this was caused by a unplanned network related.(Failed network card. )
     </span>
    </span>
    <time datetime="2024-01-28">
    </time>
    09:52 PM EST.
   </p>
   <p>
    <span style="letter-spacing: 0.0px;">
     Failed over to the secondary isp :-
    </span>
    <time datetime="2024-01-29">
    </time>
    <span style="letter-spacing: 0.0px;">
    </span>
    <span style="letter-spacing: 0.0px;">
     @10:20 AM EST.
    </span>
   </p>
   <p>
    ISP fixed issue and Raghavendra failed back over to the primary ISP :-
    <span>
    </span>
    <time datetime="2024-01-29">
    </time>
    <span>
    </span>
    @09:15 PM EST.
   </p>
   <h3>
    Corrective Action
   </h3>
   <ul>
    <li>
     Our
     <span style="color: rgb(55,65,81);">
      existing design requires manual intervention for site failover, but BGP peering with the ISP enables automatic failover.
     </span>
    </li>
    <li>
     <span style="color: rgb(55,65,81);">
      We need to have OOB management configured in SAN. (
     </span>
     The San Diego office needs an opengear.)
    </li>
    <li>
     <span>
      During the issue, found issues to access the firewall using the OOB Network  Need to get this documented and train the network team on how this works.
     </span>
    </li>
   </ul>
   <h3>
    Analysis
   </h3>
   <p>
    ISP failures happen and we only need to ensure that we can and do respond appropriately. In this case, we were not able to remotely address the issue and an on-site technician had to assist.
   </p>
   <h3>
    Introduced Issues
   </h3>
   <p>
    <ac:placeholder>
     Edit the macro below to replace the issue ID in the JQL query
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="1dcb527e-6cb6-45a4-a4a1-55cf9b51022f" ac:name="jira" ac:schema-version="1">
     <ac:parameter ac:name="server">
      System JIRA
     </ac:parameter>
     <ac:parameter ac:name="columnIds">
      issuekey,priority,status,summary,created,updated,reporter,customfield_11008
     </ac:parameter>
     <ac:parameter ac:name="columns">
      key,priority,status,summary,created,updated,reporter,Sprint
     </ac:parameter>
     <ac:parameter ac:name="maximumIssues">
      20
     </ac:parameter>
     <ac:parameter ac:name="jqlQuery">
      issue in linkedIssues(ITDW-123, "introduced")
     </ac:parameter>
     <ac:parameter ac:name="serverId">
      ac6def98-2140-30c3-8103-4b52b8b31135
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <h2>
    Detection
   </h2>
   <hr/>
   <h3>
    How quickly was the problem detected?
   </h3>
   <span style="color: rgb(51,51,51);">
    <span style="background-color: rgb(245,245,245);">
     Nathaniel Williams responded once the action was triggered via Pagerduty.
    </span>
   </span>
   <h3>
    How was the problem detected?
   </h3>
   <span style="color: rgb(51,51,51);">
    <span style="background-color: rgb(245,245,245);">
     Pingdom and Pagerduty. Nathaniel was alerted via on-call schedule.
    </span>
   </span>
   <h3>
    How can detection be improved?
   </h3>
   <span style="color: rgb(51,51,51);">
    <span style="background-color: rgb(245,245,245);">
     Detection was great. Pingdom did it's job.
    </span>
   </span>
   <h2>
    Response
   </h2>
   <hr/>
   <h3>
    How quickly did we respond once detected?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <em>
      <span style="background-color: rgb(245,245,245);">
       Nathaniel Williams detected the problem immediately and responded.
      </span>
     </em>
    </span>
   </p>
   <h3>
    Did we adequately communicate to our users?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Email was sent to all SAN end users during and after the outage.
      </em>
     </span>
    </span>
   </p>
   <h3>
    If not, how can this be improved?
   </h3>
   <p>
    Communication was appropriate.
   </p>
   <h2>
    Mitigation
   </h2>
   <hr/>
   <h3>
    What went well that helped minimize the impact of this problem?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       The response of Nathaniel Williams and Scottie being willing to get to the office early to help restore services.
      </em>
     </span>
    </span>
   </p>
   <h3>
    What can be done to minimize the impact if a problem like this recurs?
   </h3>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Automatic Failover might have helped restore services quickly.
      </em>
     </span>
    </span>
   </p>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Working OOB Management switches at all offices.
      </em>
     </span>
    </span>
   </p>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       TFE changes need to be able to be pushed to the firewall via the primary or secondary ISP. See ITINFRA-2564.
      </em>
     </span>
    </span>
   </p>
   <h2>
    Avoidance
   </h2>
   <hr/>
   <h3>
    What can we do in the future to avoid a problem like this?
   </h3>
   <p>
    We need to establish a process for failover across sites. Need documentation on the OOB management of the site during this kind of issues(Opengear setup) to access the device when it lost the connectivity.
   </p>
   <ul>
    <li>
     Failover testing.
    </li>
    <li>
     OOB Management Configuration Hardening and Documentation.
    </li>
    <li>
     Monitoring/visibility
    </li>
    <li>
     Review FW configurations to re-assure redundancy is established
    </li>
   </ul>
   <h2>
    Next Actions
   </h2>
   <hr/>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Opengear configuration Hardening.
       <ac:link>
        <ri:user ri:userkey="712020:71b2d823-3ea6-4303-ba75-6ea7f7537779">
        </ri:user>
       </ac:link>
       ITINFRA-2576
      </em>
     </span>
    </span>
   </p>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Failover testing in HYD.
       <ac:link>
        <ri:user ri:userkey="712020:71b2d823-3ea6-4303-ba75-6ea7f7537779">
        </ri:user>
       </ac:link>
       <ac:link>
        <ri:user ri:userkey="712020:77ac752e-b932-495a-99ab-f8848d8ba5eb">
        </ri:user>
       </ac:link>
       Raghavendra completed Failover testing. Was a success. PR linked here:
       <a href="https://github.com/schrodinger/tf-forti-hyd/pull/30">
        https://github.com/schrodinger/tf-forti-hyd/pull/30
       </a>
      </em>
     </span>
    </span>
   </p>
   <p>
    <span style="color: rgb(51,51,51);">
     <span style="background-color: rgb(245,245,245);">
      <em>
       Provide documentation and expectations for failover.
       <ac:link>
        <ri:user ri:userkey="557058:9290142c-5161-42cc-b65b-d8b8487fa532">
        </ri:user>
       </ac:link>
       <ac:link>
        <ri:user ri:userkey="712020:668ed8e3-9979-4f45-ba67-1748ea426e8c">
        </ri:user>
       </ac:link>
       Will update current documentation.
      </em>
     </span>
    </span>
   </p>
   <ac:task-list>
    <ac:task>
     <ac:task-id>
      1
     </ac:task-id>
     <ac:task-status>
      incomplete
     </ac:task-status>
     <ac:task-body>
      <span class="placeholder-inline-tasks">
       Type your task here, using "@" to assign to a user and "//" to select a due date
      </span>
     </ac:task-body>
    </ac:task>
   </ac:task-list>
   <h2>
    Related articles
   </h2>
   <hr/>
   <p>
    <ac:placeholder>
     Related articles appear here based on the labels you select. Click to edit the macro and add or change labels.
    </ac:placeholder>
   </p>
   <p>
    <ac:structured-macro ac:macro-id="ffeb327a-3070-4405-823e-4605184c1568" ac:name="contentbylabel" ac:schema-version="4">
     <ac:parameter ac:name="showLabels">
      false
     </ac:parameter>
     <ac:parameter ac:name="max">
      5
     </ac:parameter>
     <ac:parameter ac:name="spaces">
      SYSMGR
     </ac:parameter>
     <ac:parameter ac:name="showSpace">
      false
     </ac:parameter>
     <ac:parameter ac:name="sort">
      modified
     </ac:parameter>
     <ac:parameter ac:name="reverse">
      true
     </ac:parameter>
     <ac:parameter ac:name="type">
      page
     </ac:parameter>
     <ac:parameter ac:name="cql">
      label = "kb-how-to-article" and type = "page" and space = "SYSMGR"
     </ac:parameter>
     <ac:parameter ac:name="labels">
      kb-how-to-article
     </ac:parameter>
    </ac:structured-macro>
   </p>
   <ac:structured-macro ac:macro-id="b77901a8-fc07-43f9-b345-36673b35c2e9" ac:name="details" ac:schema-version="1">
    <ac:parameter ac:name="hidden">
     true
    </ac:parameter>
    <ac:rich-text-body>
     <p class="auto-cursor-target">
      <br/>
     </p>
     <table class="wrapped">
      <colgroup>
       <col/>
       <col/>
      </colgroup>
      <tbody>
       <tr>
        <th>
         Related issues
        </th>
        <td>
         <br/>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="auto-cursor-target">
      <br/>
     </p>
    </ac:rich-text-body>
   </ac:structured-macro>
   <p class="auto-cursor-target">
    <br/>
   </p>
  </ac:layout-cell>
 </ac:layout-section>
</ac:layout>
